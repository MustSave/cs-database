## [lecture21] db 테이블 설계 잘못하면 발생하는 문제

### DB스키마 설계를 잘 해야 하는 이유

- 중복데이터 문제
  - 저장 공간 낭비
  - 실수로 인한 데이터 불일치 가능성 존재
  - ex. 회사 table, 부서 table을 하나로 합쳐서 사용한다면? (`emple_id` PK)
    - 같은 부서 사람의 tuple 내의 부서 정보가 중복될 수 있음
    - insertion anomaly
      - 정의: 새 데이터를 삽입할 때 불필요한 데이터가 함께 삽입되거나 데이터의 일관성이 깨지는 상황.
      - 예시: 새로운 학생을 추가하려고 할 때, 그 학생의 코스 정보가 없으면 전체 레코드를 삽입할 수 없는 경우.
    - deletion anomaly
      - 정의: 데이터를 삭제할 때 원치 않는 데이터까지 함께 삭제되는 상황.
      - 예시: 학생이 수강 중인 모든 과목을 삭제하면, 학생의 정보도 함께 삭제되는 경우.
    - update anomaly
      - 정의: 데이터를 갱신할 때 모든 관련 레코드를 일관성 있게 갱신하지 못해 데이터의 일관성이 깨지는 상황.
      - 예시: 특정 교수의 이름을 변경해야 할 때, 해당 교수가 가르치는 모든 과목의 레코드에서 이름을 변경해야 하는 경우.

- Spurious Tuples(가짜 튜플)
  - natural join을 할 때 가짜 튜플이 발생할 수 있음(잘못된 테이블 설계 때문)
- null값이 많아짐으로 인한 문제점들
  - null값이 있는 col로 join하는 경우 상황에 따라 예상과 다른 결과 발생
  - null값이 있는 col에 aggregate function을 사용했을 때 주의 필요
  (count(*)하면 null값 있는 col있어도 전체 테이블 기준 개수 추출)
  - 불필요한 storage 낭비
